{{ $headers := findRE "<h[2-3].*?>(.|\n])+?</h[2-3]>" .Content }}
{{ $showToc := ne $.Params.no_toc true }}
{{ if $showToc }}
<div id="table-of-contents">
	<ul>
		{{ range $header := $headers }}
			{{ $name := ($header | plainify) }}
			{{ $tag := htmlEscape $header | replaceRE "^&lt;(h.).+$" "$1" }}
			{{ $id := htmlEscape $header | replaceRE "^.+id=&#34;(.+)&#34;.+$" "$1" }}
			{{ $url := delimit ( slice "#" $id) "" }}
			<li class="{{ $tag }}"><a href="{{ $url }}">{{ htmlUnescape $name }}</a></li>
		{{ end }}		
	</ul>
</div>
{{ end }}
